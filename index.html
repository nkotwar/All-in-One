<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>All-in-One Banking & Documentation</title>

    <!-- CSS Imports -->
    <link rel="stylesheet" href="css/all.min.css" />
    <!-- Local Material Icons -->
    <link rel="stylesheet" href="fonts/material-icons.css" />
    <link rel="stylesheet" href="css/cropper.min.css" />

    <!-- Base Styles -->
    <link rel="stylesheet" href="css/styles/base/_reset.css" />
    <link rel="stylesheet" href="css/styles/base/_typography.css" />
    <link rel="stylesheet" href="css/styles/base/_variables.css" />
    <link rel="stylesheet" href="css/styles/base/_utilities.css" />

    <!-- Component Styles -->
    <link rel="stylesheet" href="css/styles/components/_buttons.css" />
    <link rel="stylesheet" href="css/styles/components/_cards.css" />
    <link rel="stylesheet" href="css/styles/components/_forms.css" />
    <link rel="stylesheet" href="css/styles/components/_sidebar.css" />
    <link rel="stylesheet" href="css/styles/components/_toasts.css" />
    <link rel="stylesheet" href="css/styles/components/_tooltips.css" />
    <link rel="stylesheet" href="css/styles/components/_dropdowns.css" />
    <link rel="stylesheet" href="css/styles/components/_tabs.css" />
    <link rel="stylesheet" href="css/styles/components/_modals.css" />

    <!-- Layout Styles -->
    <link rel="stylesheet" href="css/styles/layouts/_grid.css" />
    <link rel="stylesheet" href="css/styles/layouts/_flex.css" />

    <!-- Page-Specific Styles -->
    <link rel="stylesheet" href="css/styles/pages/_documentation.css" />
    <link rel="stylesheet" href="css/styles/pages/_emi-calculator.css" />
    <link rel="stylesheet" href="css/styles/pages/_wealth-simulator.css" />
    <link rel="stylesheet" href="css/styles/pages/_cbs-hierarchy.css" />
    <link rel="stylesheet" href="css/styles/pages/_snap-container.css" />
    <link rel="stylesheet" href="css/styles/pages/pdf-editor.css" />
    <link rel="stylesheet" href="css/styles/pages/_text-parser.css" />

    <link rel="stylesheet" href="css/styles/responsive.css" />
    <link rel="stylesheet" href="css/styles/viewer.css" />

    <!-- Modern Core JavaScript -->
    <script src="js/core/errorHandler.js" defer></script>
    <script src="js/core/toastSystem.js" defer></script>
    
    <!-- Legacy JavaScript Libraries -->
    <script src="js/libs/interact.min.js" defer></script>
        <script src="js/libs/CustomEase.min.js" defer></script>
    <script src="js/libs/docxreplace.js" defer></script>
    <script src="js/libs/gsap.min.js" defer></script>
    <script src="js/libs/Sortable.min.js" defer></script>
    <script src="js/libs/pdf-lib.min.js" defer></script>
    <script src="js/libs/cropper.min.js" defer></script>
        <!-- External Libraries -->
    <script src="js/libs/chart.js" defer></script>
    <script src="js/libs/jszip.min.js" defer></script>
    <script src="js/libs/pako.min.js" defer></script>
    <script src="js/libs/jszip.min.js" defer></script>
    <script src="js/libs/pdf.worker.min.js" defer></script>
    <script src="js/libs/pdf.min.js" defer></script>
    <script src="js/libs/jszip.min.js" defer></script>
    <script src="js/libs/mammoth.browser.min.js" defer></script>
    <script src="js/libs/html2pdf.bundle.min.js" defer></script>
    <script src="js/libs/fuse.min.js" defer></script>

    <!-- Legacy Core Scripts -->
    <script src="js/core/eventHandlers.js" defer></script>
    <script src="js/core/main.js" defer></script>
    <script src="js/core/utils.js" defer></script>
    <script src="js/core/constants.js" defer></script>

    <!-- Module Scripts -->
    <script src="js/modules/documentation/pdfHandlers.js" defer></script>
    <script src="js/modules/emi-calculator/chartUtils.js" defer></script>
    <script src="js/modules/emi-calculator/emiCalculator.js" defer></script>
    <script src="js/modules/wealth-simulator/fdCalculator.js" defer></script>
    <script src="js/modules/wealth-simulator/rdCalculator.js" defer></script>
    <script src="js/modules/wealth-simulator/apyCalculator.js" defer></script>
    <script src="js/modules/wealth-simulator/ssyCalculator.js" defer></script>
    <script src="js/modules/wealth-simulator/ppfCalculator.js" defer></script>
    <script src="js/modules/wealth-simulator/wealthSimulator.js" defer></script>
    <script src="js/modules/cbs-hierarchy/cbsData.js" defer></script>
    <script src="js/modules/cbs-hierarchy/cbshierarchy.js" defer></script>
    <script src="js/modules/snap/pdf-editor.js" defer></script>
    <script src="js/modules/snap/ckycsnap.js" defer></script>
    <script src="js/modules/snap/drop-handler.js" defer></script>
    <script src="js/modules/text-parser/textParser.js" defer></script>
    <script src="js/modules/text-parser/bankDepositsParser.js" defer></script>
    <script src="js/modules/text-parser/bglAccountsParser.js" defer></script>
    <script src="js/modules/text-parser/loansBalanceParser.js" defer></script>
    <script src="js/modules/text-parser/newLoansBalanceParser.js" defer></script>
    <script src="js/modules/text-parser/newCCODBalanceParser.js" defer></script>
    <script src="js/modules/text-parser/ccODBalanceParser.js" defer></script>
    <script src="js/modules/text-parser/sdvAccountsParser.js" defer></script>
    <script src="js/modules/text-parser/cgtmseClaimsParser.js" defer></script>

  <!-- File Hub Router (must load after modules) -->
  <script src="js/modules/file-hub/fileHub.js" defer></script>

    <!-- Data Files -->
    <script src="js/data/data.js" defer></script>
    <script src="js/data/raw1.js" defer></script>
    <script src="js/data/raw2.js" defer></script>
    <script src="js/data/raw3.js" defer></script>
  </head>
  <body>
    <div id="menu">
      <div class="hamburger">
        <div class="line"></div>
        <div class="line"></div>
        <div class="line"></div>
      </div>
      <div class="menu-inner">
        <button id="hamburgerToggle" class="hamburger-toggle">
          <i class="material-icons">menu</i>
        </button>
        <ul id="menu-inner-ul">
          <li data-tab="documentation">
            <i class="material-icons">description</i> Documentation
          </li>
          <li data-tab="emi-calculator">
            <i class="material-icons">calculate</i> EMI Calculator
          </li>
          <li data-tab="wealth-simulator">
            <i class="material-icons">savings</i> Wealth Simulator
          </li>
          <li data-tab="cbs-hierarchy">
            <i class="material-icons">account_tree</i> CBS Hierarchy
          </li>
          <li data-tab="file-parser">
            <i class="material-icons">folder_open</i> File Parser
          </li>
        </ul>

        <!-- Signature Section -->
        <div class="signature">
          <div class="signature-name">Nitin Kotwar</div>
          <div class="signature-details">
            <span><i class="material-icons">badge</i> PF 139535</span>
            <span><i class="material-icons">phone</i> 8267818491</span>
          </div>
          <div class="disclaimer">
            <small>¬© For Internal Use Only.</small>
          </div>
        </div>
      </div>
    </div>

    <h2 id="h2h2"></h2>

    <!-- Main Content -->
    <div class="container" id="container">
      <!-- Documentation Section (Default View) -->
      <div id="documentation" class="content active">
        <div id="logoimg">
          <img style="width: 20%" src="assets/images/logo.png" />
        </div>
        <h2>Documentation</h2>
        <h4>[Beta Release for staff]</h4>

        <select id="presetSelector">
          <option value="">Select a Preset</option>
          <option value="NEFT/RTGS Approval - RO">
            NEFT/RTGS Approval - RO
          </option>
          <option value="Operation">Operation</option>
          <option value="CKCC Renewal">CKCC Renewal</option>
          <option value="Current Account from RO">
            Current Account from RO
          </option>
          <option value="DL-OD AGAINST FD MMDC">DL-OD AGAINST FD MMDC</option>
          <option value="Deceased Case Settlement with Nomination">
            Deceased Case Settlement with Nomination
          </option>
          <option value="CC Renewal - Proprietor">
            CC Renewal - Proprietor
          </option>
        </select>

        <!-- Search input -->
        <div class="search-container">
          <input type="text" id="searchInput" placeholder="Search PDFs..." />
          <div id="searchResults" class="search-results"></div>
        </div>

        <!-- Toast Notifications -->
        <div id="toastContainer" class="toast-container"></div>

        <!-- Selected PDFs container -->
        <div id="selectedPdfsContainer" class="selected-pdfs">
          <h3>Selected PDFs</h3>
          <div id="selectedPdfsList"></div>
          <div class="bulk-actions">
            <button id="clearAll" class="clear-button" aria-label="Clear All">
              <span class="icon">üóëÔ∏è</span> Clear All
            </button>
          </div>
        </div>

        <!-- Form Container -->
        <div id="formContainer"></div>
        <button id="fillAndOpen" disabled>
          <span class="icon">üìÑ</span> Fill & Open PDF
        </button>
        <iframe
          id="pdfViewer"
          style="width: 100%; height: 500px; display: none"
        ></iframe>

        <!-- Sidebar for all available PDFs -->
        <div id="pdfSidebar">
          <!-- Toggle button inside the sidebar -->
          <button id="sidebarToggle" class="sidebar-toggle">
            <i class="material-icons">menu</i>
          </button>
          <div id="loadingIndicator" style="display: none">Loading...</div>
          <h3>Available PDFs</h3>
          <div id="allPdfsList"></div>
          <div id="logoimg2">
            <img style="width: 50%" alt="" src="assets/images/icon.png" />
          </div>
        </div>
      </div>

      <!-- EMI Calculator Section -->
      <div id="emi-calculator" class="content">
        <h2>Loan EMI Calculator</h2>

        <!-- First two divs (input fields and chart) -->
        <div class="emi-calculator-content">
          <!-- Input fields section -->
          <div class="input-fields">
            <div class="input-group">
              <label>Loan Amount (‚Çπ):</label>
              <input
                type="number"
                id="loan-amount"
                placeholder="e.g., 1200000"
                value="1200000"
              />
            </div>
            <div class="input-group">
              <label>Interest Rate (%):</label>
              <input
                type="number"
                id="interest-rate"
                placeholder="e.g., 8.5"
                value="8.5"
              />
            </div>
            <div class="input-group">
              <label>Loan Tenure (Years):</label>
              <input
                type="number"
                id="loan-tenure"
                placeholder="e.g., 12"
                value="12"
              />
            </div>
            <div class="input-group">
              <label>Moratorium Period (Months):</label>
              <input
                type="number"
                id="moratorium"
                placeholder="e.g., 18"
                value="0"
              />
            </div>
            <div class="input-group">
              <label>Net Monthly Income (‚Çπ):</label>
              <input
                type="number"
                id="net-monthly-income"
                placeholder="e.g., 56000"
                value="100000"
              />
            </div>
            <div class="input-group">
              <label>Existing EMI (‚Çπ):</label>
              <input
                type="number"
                id="existing-emi"
                placeholder="e.g., 4000"
                value="0"
              />
            </div>
            <button id="calculate-emi">Calculate EMI</button>

            <!-- EMI Slider -->
            <div class="input-group">
              <label>Adjust EMI (‚Çπ):</label>
              <input
                type="range"
                id="emi-slider"
                min="0"
                max="100000"
                step="100"
              />
            </div>
            <div class="result-card">
              <p>Forced EMI: <span id="new-emi">‚Çπ0.00</span></p>
              <p>Interest Saved: <span id="emi-saved">‚Çπ0.00</span></p>
              <p>EMI Saved: <span id="new-tenure">0 months</span></p>
            </div>
          </div>

          <!-- Chart section -->
          <div class="result-container chart-section">
            <div class="summary-chart">
              <canvas id="summaryChart"></canvas>
            </div>
            <div class="results-panel">
              <h2>Summary</h2>
              <canvas id="loanChart"></canvas>
            </div>
          </div>
        </div>

        <!-- Results section -->
        <div class="result-container results-section">
          <h3>Results</h3>
          <div class="result-grid">
            <!-- QoF Calculation -->
            <div class="result-card">
              <div class="result-header">
                <i class="material-icons">currency_rupee</i>
                <span>Max Loan Eligibility</span>
              </div>
              <div class="result-value" id="max-loan-eligibility">‚Çπ0.00</div>
              <!-- Input and Button for Adjusted EMI Capacity -->
              <div class="adjustment-container">
                <label for="adjusted-emi-capacity"
                  >Adjust Max EMI Capacity:</label
                >
                <input
                  type="number"
                  id="adjusted-emi-capacity"
                  class="emi-input"
                  value="0"
                  step="100"
                  placeholder="Enter adjusted EMI capacity"
                />
                <button id="recalculate-finance" class="recalculate-btn">
                  Recalculate Quantum of Finance
                </button>
              </div>
            </div>

            <!-- Permissible NMI/EMI Ratio -->
            <div class="result-card">
              <div class="result-header">
                <i class="material-icons">percent</i>
                <span>Permissible NMI/EMI Ratio</span>
              </div>
              <div class="result-value" id="nmi-emi-ratio">0.00%</div>
              <div class="progress-bar">
                <div class="progress" style="width: 0%"></div>
              </div>
            </div>

            <!-- Max EMI Capacity -->
            <div class="result-card">
              <div class="result-header">
                <i class="material-icons">currency_rupee</i>
                <span>Max EMI Capacity</span>
              </div>
              <div class="result-value" id="max-emi-capacity">‚Çπ0.00</div>
            </div>

            <!-- EMI Card -->
            <div class="result-card" id="emi-card">
              <div class="result-header">
                <i class="material-icons">trending_up</i>
                <span id="emi-label">EMI</span>
                <!-- Dynamic label -->
              </div>
              <div class="result-value" id="emi-moratorium">‚Çπ0.00</div>
            </div>

            <!-- EMI Post Moratorium Card (only shown if moratorium > 0) -->
            <div
              class="result-card"
              id="emi-post-moratorium-card"
              style="display: none"
            >
              <div class="result-header">
                <i class="material-icons">play_circle</i>
                <span>EMI Post Moratorium</span>
              </div>
              <div class="result-value" id="emi-post-moratorium">‚Çπ0.00</div>
              <!-- Toggle for Interest Served (only shown if moratorium > 0) -->
              <div id="interest-served-toggle" style="display: none">
                <label class="toggle-switch">
                  <input type="checkbox" id="toggle-interest-served" />
                  <span class="slider">
                    <span class="slider-text slider-yes">Yes</span>
                    <span class="slider-text slider-no">No</span>
                  </span>
                </label>
                <span>Interest Served</span>
              </div>
            </div>

            <!-- Early Repayment Summary -->
            <div class="result-card">
              <div class="result-header">
                <i class="material-icons">paid</i>
                <span>Early Repayment Summary</span>
              </div>
              <div id="early-repayment-summary">
                <!-- Summary will be dynamically populated here -->
              </div>
            </div>
          </div>
        </div>

        <!-- Amortization Table Section -->
        <div id="amortization-table">
          <h3>Amortization Schedule</h3>
          <div class="amortization-cards" id="amortizationCards">
            <!-- Year cards will be dynamically populated here -->
          </div>
        </div>
      </div>

      <!-- Wealth Simulator Section -->
      <div id="wealth-simulator" class="content">
        <h2>Wealth Simulator</h2>
        <div class="calculator-tabs">
          <button class="tab-button active" data-calculator="apy">
            APY Calculator
          </button>
          <button class="tab-button" data-calculator="ssy">
            Sukanya Samriddhi
          </button>
          <button class="tab-button" data-calculator="ppf">
            PPF Calculator
          </button>
          <button class="tab-button" data-calculator="fd">Fixed Deposit</button>
          <button class="tab-button" data-calculator="rd">
            Recurring Deposit
          </button>
        </div>

        <!-- APY Calculator -->
        <div id="apy-calculator" class="calculator-content active">
          <h3>Atal Pension Yojana (APY) Calculator</h3>
          <div class="input-panel">
            <div class="input-fields">
              <div class="input-group">
                <label>Age of Subscriber (Years):</label>
                <input
                  type="number"
                  id="apy-age"
                  placeholder="e.g., 25"
                  min="18"
                  max="40"
                  value="25"
                />
              </div>
              <div class="input-group">
                <label>Desired Pension Amount (‚Çπ):</label>
                <select id="apy-pension-amount">
                  <option value="1000">‚Çπ1,000</option>
                  <option value="2000">‚Çπ2,000</option>
                  <option value="3000">‚Çπ3,000</option>
                  <option value="4000">‚Çπ4,000</option>
                  <option value="5000">‚Çπ5,000</option>
                </select>
              </div>
              <div class="input-group">
                <label>Contribution Frequency:</label>
                <select id="apy-frequency">
                  <option value="monthly">Monthly</option>
                  <option value="quarterly">Quarterly</option>
                  <option value="half-yearly">Half-Yearly</option>
                </select>
              </div>
              <div class="input-group">
                <label>Are you an income tax payer?</label>
                <select id="apy-tax-payer">
                  <option value="no">No</option>
                  <option value="yes">Yes</option>
                </select>
              </div>
              <div class="input-group">
                <label>Assumed Return Rate (%):</label>
                <input
                  type="number"
                  id="apy-return-rate"
                  placeholder="e.g., 8"
                  value="8"
                />
              </div>
              <div class="input-group">
                <label>Annuity Rate at Retirement (%):</label>
                <input
                  type="number"
                  id="apy-annuity-rate"
                  placeholder="e.g., 7"
                  value="7"
                />
              </div>
              <button id="calculate-apy">Calculate APY</button>
            </div>
            <div class="chart-container">
              <canvas id="apy-contribution-breakdown-chart"></canvas>
            </div>
          </div>
          <div class="result-card">
            <h4>Results</h4>
            <div class="result-item">
              <label>Monthly Contribution Amount:</label>
              <span id="apy-contribution-amount">‚Çπ0.00</span>
            </div>
            <div class="result-item">
              <label>Total Contribution:</label>
              <span id="apy-total-contribution">‚Çπ0.00</span>
            </div>
            <div class="result-item">
              <label>Government Co-Contribution:</label>
              <span id="apy-government-co-contribution">‚Çπ0.00</span>
            </div>
            <div class="result-item">
              <label>
                Total Corpus:
                <span class="tooltip">
                  <i class="material-icons">info_outline</i>
                  <span class="tooltiptext">
                    <strong>How APY Funds Are Invested:</strong>
                    <p>
                      The funds collected under APY are managed by pension fund
                      managers (PFMs) appointed by PFRDA, and they are invested
                      in a mix of financial instruments:
                    </p>
                    <ul>
                      <li>
                        <strong
                          >Government Securities (G-Secs) ‚Äì 45% to 50%</strong
                        >
                        <ul>
                          <li>
                            Safe investment option that ensures stability.
                          </li>
                        </ul>
                      </li>
                      <li>
                        <strong
                          >Debt Instruments and Term Deposits of Banks ‚Äì
                          35%</strong
                        >
                        <ul>
                          <li>
                            Includes corporate bonds, bank fixed deposits, and
                            other secured debt instruments.
                          </li>
                        </ul>
                      </li>
                      <li>
                        <strong
                          >Equity and Related Investments ‚Äì 5% to 15%</strong
                        >
                        <ul>
                          <li>
                            A small portion is invested in equity markets to
                            generate returns, following the Nifty 50 or Sensex
                            index.
                          </li>
                        </ul>
                      </li>
                      <li>
                        <strong>Money Market Instruments ‚Äì Up to 5%</strong>
                        <ul>
                          <li>
                            Includes Treasury Bills (T-Bills), Commercial Papers
                            (CPs), and other short-term investments for
                            liquidity.
                          </li>
                        </ul>
                      </li>
                    </ul>
                  </span>
                </span>
              </label>
              <span id="apy-corpus">‚Çπ0.00</span>
            </div>
            <div class="result-item">
              <label>Pension Amount from Age 60:</label>
              <span id="apy-pension-amount-result">‚Çπ0.00</span>
            </div>
            <div class="result-item">
              <label>Return of Corpus to Nominee:</label>
              <span id="apy-return-of-corpus">‚Çπ0.00</span>
            </div>
            <div class="result-item">
              <label>
                NPV of Pension Payments at Age 60:
                <span class="tooltip">
                  <i class="material-icons">info_outline</i>
                  <span class="tooltiptext">
                    <strong>NPV of Future Pension Payments at Age 60:</strong>
                    <ul>
                      <li>
                        <strong>Best Option:</strong> This reflects the present
                        value of all future pension payments at the time the
                        pension starts (age 60). It accounts for the time value
                        of money and provides a realistic estimate of the
                        pension's worth at retirement.
                      </li>
                      <li>
                        <strong>Why It Makes Sense:</strong> It aligns with the
                        timeline of the pension and gives a clear picture of the
                        pension's value when it starts.
                      </li>
                    </ul>
                  </span>
                </span>
              </label>
              <span id="apy-npv-pension">‚Çπ0.00</span>
            </div>
          </div>

          <!-- APY Calculator Info Card -->
          <div class="info-card">
            <h4>Key Information:</h4>
            <ul class="key-info-list">
              <li><strong>Eligibility:</strong> Age 18 to 40 years.</li>
              <li><strong>Pension Start Age:</strong> 60 years.</li>
              <li>
                <strong>Government Co-Contribution:</strong> 50% of your
                contribution or ‚Çπ1,000 per year (whichever is lower) for 5 years
                (for non-tax payers).
              </li>
              <li>
                <strong>On Demise:</strong>
                <ul class="nested-list">
                  <li>Spouse can continue the scheme.</li>
                  <li>
                    If both subscriber and spouse pass away, the corpus is
                    returned to the nominee.
                  </li>
                </ul>
              </li>
              <li>
                <strong>Upgrade/Downgrade Pension Amount:</strong>
                <ul class="nested-list">
                  <li>
                    You can upgrade or downgrade your selected pension amount
                    once per financial year during the accumulation phase.
                  </li>
                  <li>
                    Changes will affect your contribution amount and future
                    pension payouts.
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </div>

        <!-- Sukanya Samriddhi Calculator -->
        <div id="ssy-calculator" class="calculator-content">
          <h3>Sukanya Samriddhi Yojana (SSY) Calculator</h3>
          <div class="calculator-container ssy-layout">
            <!-- Left Column: Inputs -->
            <div class="form-section ssy-inputs">
              <div class="form-group">
                <label for="initial-age">Initial Age of Girl (Years):</label>
                <input type="number" id="initial-age" value="1" min="0" max="10" />
              </div>
              <div class="form-group">
                <label for="ssy-deposit-frequency">Deposit Frequency:</label>
                <select id="ssy-deposit-frequency">
                  <option value="monthly">Monthly</option>
                  <option value="yearly">Yearly</option>
                </select>
              </div>
              <div class="form-group">
                <label for="ssy-deposit">Deposit Amount (‚Çπ):</label>
                <input type="number" id="ssy-deposit" value="5000" min="250" step="100" />
              </div>
              <div class="form-group">
                <label for="ssy-interest-rate">Interest Rate (%):</label>
                <input type="number" id="ssy-interest-rate" value="8.2" step="0.1" />
              </div>
              <button id="calculate-ssy" class="btn btn-primary">Calculate</button>
            </div>

            <!-- Right Column: Visuals & Results -->
            <div class="ssy-visuals">
              <div class="chart-container">
                <canvas id="ssy-corpus-growth-chart"></canvas>
              </div>
              <div id="ssy-timeline-container" class="timeline-container" style="display:none;">
                <div class="timeline-track"></div>
                <div class="timeline-labels"></div>
                <div class="timeline-events">
                  <!-- Draggable icons will be added here by JS -->
                </div>
              </div>
              <div id="ssy-event-buttons" class="event-buttons" style="display:none;">
                <!-- Buttons to add events will be added here by JS -->
              </div>
              <div id="ssy-results" class="results-section">
                <div class="result-item">
                  <label>Final Maturity Value:</label>
                  <span id="ssy-total-corpus">‚Çπ0.00</span>
                </div>
                <div class="result-item">
                  <label>Funds Withdrawn:</label>
                  <span id="ssy-funds-withdrawn">‚Çπ0.00</span>
                </div>
              </div>
            </div>
          </div>
          <div class="info-card">
            <h4>Key Information:</h4>
            <ul class="key-info-list">
              <li>
                <strong>Eligibility:</strong> Girl child below 10 years of age.
              </li>
              <li>
                <strong>Account Tenure:</strong> 21 years from the date of
                account opening.
              </li>
              <li>
                <strong>Deposit Range:</strong> Minimum ‚Çπ250, Maximum ‚Çπ1.5 Lakh
                per year.
              </li>
              <li>
                <strong>Interest Rate:</strong> Currently 8.2% per annum
                (compounded annually).
              </li>
              <li>
                <strong>Partial Withdrawal:</strong>
                <ul class="nested-list">
                  <li>
                    Up to 50% of the balance can be withdrawn for higher
                    education or marriage.
                  </li>
                </ul>
              </li>
              <li>
                <strong>Tax Benefits:</strong> EEE (Exempt-Exempt-Exempt) under
                Section 80C.
              </li>
              <li>
                <strong>Maturity:</strong>
                <ul class="nested-list">
                  <li>
                    Account matures after 21 years or on the marriage of the
                    girl child after 18 years, whichever is earlier.
                  </li>
                  <li>
                    The entire corpus is paid to the girl child at maturity.
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </div>

        <!-- PPF Calculator -->
        <div id="ppf-calculator" class="calculator-content">
          <h3>Public Provident Fund (PPF) Calculator</h3>
          <div class="calculator-container ppf-layout">
            <div class="form-section">
              <div class="form-group">
                <label for="ppf-deposit-frequency">Deposit Frequency:</label>
                <select id="ppf-deposit-frequency">
                  <option value="monthly">Monthly</option>
                  <option value="yearly">Yearly</option>
                </select>
              </div>
              <div class="form-group">
                <label for="ppf-deposit">Deposit Amount (‚Çπ):</label>
                <input type="number" id="ppf-deposit" value="1000" min="500" step="100" />
              </div>
              <div class="form-group">
                <label for="ppf-interest-rate">Interest Rate (%):</label>
                <input type="number" id="ppf-interest-rate" value="7.1" step="0.1" />
              </div>
              <div class="form-group">
                <label for="ppf-tenure">Tenure (Years, in blocks of 5):</label>
                <input type="number" id="ppf-tenure" value="15" min="15" step="5" />
              </div>
              <button id="calculate-ppf" class="btn btn-primary">Calculate</button>
              <button id="add-partial-withdrawal" class="btn btn-secondary">Add Partial Withdrawal</button>
            </div>
            <div class="results-section">
                <div class="chart-container">
                    <canvas id="ppf-corpus-growth-chart"></canvas>
                </div>
                <div class="ppf-summary">
                    <div id="ppf-results" class="results-grid">
                        <div class="result-item">
                            <label>Maturity Corpus:</label>
                            <span id="ppf-total-corpus">‚Çπ0.00</span>
                        </div>
                        <div class="result-item">
                            <label>Total Interest Earned:</label>
                            <span id="ppf-interest-earned">‚Çπ0.00</span>
                        </div>
                        <div class="result-item">
                            <label>Funds Withdrawn:</label>
                            <span id="ppf-funds-withdrawn">‚Çπ0.00</span>
                        </div>
                    </div>
                    <div class="withdrawal-list">
                        <h4>Withdrawal History</h4>
                        <ul id="ppf-withdrawal-list"></ul>
                    </div>
                </div>
            </div>
          </div>
        </div>

        <!-- Fixed Deposit Calculator -->
        <div id="fd-calculator" class="calculator-content">
          <h3>Fixed Deposit (FD) Calculator</h3>
          <div class="calculator-container">
            <div class="form-section">
              <div class="form-group">
                <label for="fd-principal">Principal Amount (‚Çπ):</label>
                <input type="number" id="fd-principal" value="100000" min="1000" step="1000" />
              </div>
              <div class="form-group">
                <label for="fd-interest-rate">Interest Rate (%):</label>
                <input type="number" id="fd-interest-rate" value="6.5" step="0.1" />
              </div>
              <div class="form-group">
                <label for="fd-tenure">Tenure (Years):</label>
                <input type="number" id="fd-tenure" value="5" min="1" />
              </div>
              <button id="calculate-fd" class="btn btn-primary">Calculate</button>
            </div>
            <div class="results-section">
              <div id="fd-results" class="results-grid">
                <div class="result-item">
                  <label>Maturity Amount:</label>
                  <span id="fd-maturity-amount">‚Çπ0.00</span>
                </div>
                <div class="result-item">
                  <label>Total Interest Earned:</label>
                  <span id="fd-interest-earned">‚Çπ0.00</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Recurring Deposit Calculator -->
        <div id="rd-calculator" class="calculator-content">
          <h3>Recurring Deposit (RD) Calculator</h3>
          <div class="calculator-container">
            <div class="form-section">
              <div class="form-group">
                <label for="rd-deposit">Monthly Deposit (‚Çπ):</label>
                <input type="number" id="rd-deposit" value="5000" min="100" step="100" />
              </div>
              <div class="form-group">
                <label for="rd-interest-rate">Interest Rate (%):</label>
                <input type="number" id="rd-interest-rate" value="6.0" step="0.1" />
              </div>
              <div class="form-group">
                <label for="rd-tenure">Tenure (Years):</label>
                <input type="number" id="rd-tenure" value="5" min="1" />
              </div>
              <button id="calculate-rd" class="btn btn-primary">Calculate</button>
            </div>
            <div class="results-section">
              <div id="rd-results" class="results-grid">
                <div class="result-item">
                  <label>Maturity Amount:</label>
                  <span id="rd-maturity-amount">‚Çπ0.00</span>
                </div>
                <div class="result-item">
                  <label>Total Interest Earned:</label>
                  <span id="rd-interest-earned">‚Çπ0.00</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- CBS Hierarchy Section -->
      <div id="cbs-hierarchy" class="content">
        <h2>CBS Hierarchy</h2>
        <div class="cbs-search-container">
          <input
            type="text"
            id="cbsSearchInput"
            placeholder="Search for an item..."
          />
        </div>
        <div id="cbsResults" class="cbs-search-results"></div>
      </div>

      <!-- Unified File Parser Section -->
      <div id="file-parser" class="content">
        <div class="text-parser">
          <h2>File Parser</h2>
          <p>Drop or add files. We‚Äôll auto-route to Image, PDF, or Text tools. The Add Files zone stays here.</p>

          <!-- Persistent Add Files Zone -->
          <div class="upload-zone" id="fileHubDropzone">
            <i class="material-icons">cloud_upload</i>
            <h3>Add Files</h3>
            <p>Drop files or click to browse</p>
            <p><small>Supported: images, PDFs, .txt, .csv, .xlsx, .xls, .log, .rpt, .dat, .tsv, .gz, .zip</small></p>
            <input type="file" class="file-input" id="fileHubInput" multiple accept=".pdf,image/*,.txt,.csv,.xlsx,.xls,.log,.rpt,.dat,.tsv,.gz,.zip">
          </div>

          <!-- Module Host: shows one workspace at a time -->
          <div id="fileHubModules">
            <!-- Snap (Image/PDF) Module View -->
            <div id="snapModule" data-module="snap" style="display:none;">
              <div class="layout">
                <!-- Left Column: Image Uploader -->
                <div class="left-column">
                  <div id="crop-container" style="display: none">
                    <img id="image" src="" alt="Image to crop" />
                  </div>
                </div>
                <!-- Right Column: Image Manipulation Controls -->
                <div class="right-column">
                  <div id="controls" style="display: none">
                    <label for="file-size">Desired File Size (KB) [<span id="file-size-range">0 KB - 0 KB</span>]:</label>
                    <input type="number" id="file-size" min="1" max="10000" value="25" />
                    <p id="file-size-error" style="color: red; display: none">Please enter a value within the calculated range.</p>
                    <div id="button-container">
                      <button id="auto-adjust-button" class="auto-adjust-button" title="Automatically adjust image settings to match the desired file size">
                        <span class="button-icon">ü™Ñ</span>
                        <span class="button-text">Auto Adjust for Desired Size</span>
                        <span class="loading-spinner" style="display: none">‚è≥</span>
                      </button>
                      <button id="download-preview-button" style="display: none">Download (0 KB)</button>
                      <button id="stop-button" style="display: none; background-color: #dc3545; color: white; border: none; border-radius: 5px; padding: 10px; font-size: 16px; cursor: pointer;">‚èπÔ∏è Stop</button>
                    </div>
                    <div class="preview-toggle-container" style="margin-top: 10px; text-align: center;">
                      <label for="toggle-preview">
                        <input type="checkbox" id="toggle-preview" checked />
                        Show Live Preview
                      </label>
                    </div>
                    <div id="visualization-container">
                      <canvas id="annealing-canvas"></canvas>
                      <img id="iteration-preview" src="" alt="Iteration Preview" style="display: none; max-height: 150px; max-width: 300px" />
                    </div>
                  </div>

                  <div id="sliders-container" style="display: none">
                    <!-- Upscale Resolution -->
                    <div class="slider-row">
                      <div class="slider-label-row">
                        <label for="upscale-slider">Super Res:</label>
                        <span id="upscale-value">1x</span>
                        <button id="lock-resolution" class="lock-button" title="Lock/Unlock Resolution">üîí</button>
                      </div>
                      <input type="range" id="upscale-slider" min="1" max="5" step="0.1" value="1" />
                    </div>

                    <!-- Noise -->
                    <div class="slider-row">
                      <div class="slider-label-row">
                        <label for="noise-slider">Texture Synthesizer:</label>
                        <span id="noise-value">0%</span>
                        <button id="lock-noise" class="lock-button" title="Lock/Unlock Noise">üîí</button>
                      </div>
                      <input type="range" id="noise-slider" min="0" max="100" value="0" />
                    </div>

                    <!-- Quality -->
                    <div class="slider-row">
                      <div class="slider-label-row">
                        <label for="quality-slider">Bitrate Compressor:</label>
                        <span id="quality-value">100%</span>
                        <button id="lock-quality" class="lock-button" title="Lock/Unlock Quality">üîí</button>
                      </div>
                      <input type="range" id="quality-slider" min="0.01" max="1" step="0.01" value="1" />
                    </div>

                    <!-- Blur -->
                    <div class="slider-row">
                      <div class="slider-label-row">
                        <label for="blur-slider">Gaussian Operator:</label>
                        <span id="blur-value">0px</span>
                        <button id="lock-blur" class="lock-button" title="Lock/Unlock Blur">üîí</button>
                      </div>
                      <input type="range" id="blur-slider" min="0" max="20" value="0" />
                    </div>

                    <!-- Color Depth -->
                    <div class="slider-row">
                      <div class="slider-label-row">
                        <label for="color-depth-slider">Pixel Spectrum:</label>
                        <span id="color-depth-value">24-bit</span>
                        <button id="lock-color-depth" class="lock-button" title="Lock/Unlock Color Depth">üîí</button>
                      </div>
                      <input type="range" id="color-depth-slider" min="1" max="24" value="24" />
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Text Parser Module View -->
            <div id="textParserModule" data-module="text" style="display:none;">
              <!-- Parsing Options -->
              <div class="parsing-options" id="parsingOptions">
            <h3>Parsing Configuration</h3>
            
            <!-- Preset Buttons -->
            <div class="preset-buttons">
              <button class="preset-btn" data-preset="bank-deposits">Bank Deposits Report</button>
              <button class="preset-btn" data-preset="bgl-accounts">BGL Account Balances</button>
              <button class="preset-btn" data-preset="loans-balance">Loans Balance Report</button>
              <button class="preset-btn" data-preset="new-loans-balance">New Loans Balance Report</button>
              <button class="preset-btn" data-preset="new-cc-od-balance">New CC/OD Balance Report</button>
              <button class="preset-btn" data-preset="cc-od-balance">CC/OD Balance Report</button>
              <button class="preset-btn" data-preset="sdv-accounts">SDV Accounts Report</button>
              <button class="preset-btn" data-preset="cgtmse-claims">CGTMSE Claims Report</button>
              <button class="preset-btn" data-preset="fixed-width">Fixed Width Columns</button>
              <button class="preset-btn" data-preset="delimited">Delimited (CSV/TSV)</button>
              <button class="preset-btn" data-preset="custom">Custom Pattern</button>
            </div>

            <div class="options-grid">
              <div class="option-group">
                <label for="parserType">Parser Type:</label>
                <select id="parserType">
                  <option value="bank-deposits">Bank Deposits Report</option>
                  <option value="bgl-accounts">BGL Account Balances</option>
                  <option value="loans-balance">Loans Balance Report</option>
                  <option value="new-loans-balance">New Loans Balance Report</option>
                  <option value="new-cc-od-balance">New CC/OD Balance Report</option>
                  <option value="cc-od-balance">CC/OD Balance Report</option>
                  <option value="sdv-accounts">SDV Accounts Report</option>
                  <option value="cgtmse-claims">CGTMSE Claims Report</option>
                  <option value="fixed-width">Fixed Width Columns</option>
                  <option value="delimited">Delimited</option>
                  <option value="regex">Regular Expression</option>
                  <option value="positional">Positional</option>
                </select>
              </div>

              <div class="option-group">
                <label for="delimiter">Delimiter (for delimited files):</label>
                <input type="text" id="delimiter" placeholder="e.g., ',' or '|' or '\t'" value=",">
              </div>

              <div class="option-group">
                <label for="skipLines">Skip Lines from Top:</label>
                <input type="number" id="skipLines" value="0" min="0">
              </div>

              <div class="option-group">
                <label for="headerRow">Header Row Number:</label>
                <input type="number" id="headerRow" value="1" min="0">
              </div>

              <div class="option-group">
                <label for="encoding">File Encoding:</label>
                <select id="encoding">
                  <option value="utf-8">UTF-8</option>
                  <option value="ascii">ASCII</option>
                  <option value="latin1">Latin-1</option>
                  <option value="windows-1252">Windows-1252</option>
                </select>
              </div>

              <div class="option-group">
                <label for="customPattern">Custom Regex Pattern:</label>
                <textarea id="customPattern" placeholder="Enter regex pattern for custom parsing..."></textarea>
              </div>
            </div>

                <button class="parse-button" id="parseButton" disabled>Parse File</button>
              </div>

              <!-- Data Container -->
              <div class="data-container" id="dataContainer">
            <!-- Table Controls -->
            <div class="table-controls">
              <div class="control-group">
                <label for="searchTable">Search:</label>
                <input type="text" id="searchTable" placeholder="Search data...">
                <div id="searchMode" style="display:inline-flex; gap:8px; align-items:center; margin-left:8px;">
                  <label style="display:inline-flex; gap:4px; align-items:center;">
                    <input type="radio" name="searchMode" value="partial" checked>
                    <span>Partial</span>
                  </label>
                  <label style="display:inline-flex; gap:4px; align-items:center;">
                    <input type="radio" name="searchMode" value="exact">
                    <span>Exact</span>
                  </label>
                </div>
              </div>
              <div class="control-group">
                <label for="pageSize">Rows per page:</label>
                <select id="pageSize">
                  <option value="25">25</option>
                  <option value="50">50</option>
                  <option value="100">100</option>
                  <option value="all">All</option>
                </select>
              </div>
              <div class="control-group">
                <button id="toggleColumns" class="export-btn">Manage Columns</button>
                <!-- Analyze Data button removed - auto-analysis on data load -->
              </div>
            </div>

            <!-- Column Management -->
            <div class="column-controls" id="columnControls" style="display: none;">
              <h4>Show/Hide Columns</h4>
              <div class="column-list" id="columnList">
                <!-- Column checkboxes will be generated dynamically -->
              </div>
            </div>

            <!-- Data Table -->
            <div class="table-wrapper">
              <table class="data-table" id="dataTable">
                <thead id="tableHead">
                  <!-- Headers will be generated dynamically -->
                </thead>
                <tbody id="tableBody">
                  <!-- Data rows will be generated dynamically -->
                </tbody>
              </table>
            </div>

            <!-- Pagination -->
            <div class="pagination" id="pagination">
              <!-- Pagination controls will be generated dynamically -->
            </div>

                <!-- Export Controls -->
                <div class="export-controls">
                  <button class="export-btn" id="exportExcel">Export Excel</button>
                  <!-- Simplified: only Excel export available -->
                </div>

                <!-- Statistics Panel -->
                <div class="stats-panel" id="statsPanel" style="display: none;">
                  <h4>Data Analysis</h4>
                  <div class="stats-grid" id="statsGrid">
                    <!-- Statistics will be generated dynamically -->
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>